$(document).on("turbolinks:load", function() {

  var ENTRY_PRICE = <%= Records::Rj.ENTRY_PRICE %>;
  var LODGING_PRICE = <%= Records::Rj::LODGING_PRICE %>;
  var FEE = <%= Records::Rj::FEE %>;

  var $amount = $("#amount");
  var $participants = $(".fields-for.participants");
  var $add = $participants.find(".add-fields");

  var price = parseInt($amount.text());

  $participants.on("click", ".lodging-checkbox", function() {
    if(this.checked) {
      price += LODGING_PRICE;
      $amount.html(price);
    } else {
      price -= LODGING_PRICE;
      $amount.html(price);
    }
  });

  $participants.on("click", ".remove-fields", function() {
    price -= ENTRY_PRICE;
    var checkbox = $(this).parents(".participants-fields").find(".lodging-checkbox");
    if(checkbox[0].checked) { price -= LODGING_PRICE };
    $amount.html(price);
  });

  $add.click(function() {
    price += ENTRY_PRICE;
    $amount.html(price);
  });


});
